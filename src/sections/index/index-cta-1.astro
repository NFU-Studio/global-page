---
import Button from "@/components/ui/Button.astro";
import * as m from "@/paraglide/messages";
import Typography from "@/components/ui/Typography.astro";
---

<section
  data-inverted="true"
  class:list={[
    "relative bg-primary isolate text-background z-10",
    "p-rws relative space-y-8 *:z-1 *:relative overflow-x-clip",
  ]}>
  <!-- <div
    class="absolute inset-0 pointer-events-none bg-background mask-[url(/favicon.svg)] mask-contain mask-right mask-no-repeat">
  </div> -->
  <header class="">
    <Typography
      as="h2"
      class={"leading-tight font-black tracking-wider text-shadow-lg text-shadow-primary"}
      variant={"h2"}
      set:html={m.lucky_crisp_turtle_radiate()}
    />
  </header>
  <Typography
    mw="h"
    variant={"quote"}
    class={"text-shadow-lg text-shadow-primary"}
    set:text={m.strong_awful_gadfly_fetch()}
  />
  <Button variant={"secondary"} size="lg" as="a" href="/kontakt/">
    {m.tired_dirty_turtle_fade()}
  </Button>
  <canvas
    id="globe-cobe"
    class="absolute! z-0! right-0 top-0 h-full aspect-square"></canvas>
</section>

<script>
  import createGlobe from "cobe";
  function main() {
    let phi = 2;
    let canvas = document.querySelector(
      "canvas#globe-cobe",
    ) as HTMLCanvasElement;
    let w = canvas.clientHeight;
    const onResize = () => {
      w = canvas.clientHeight;
    };
    window.addEventListener("resize", onResize, true);
    const globe = createGlobe(canvas, {
      devicePixelRatio: 1,
      width: w,
      height: w,
      phi: 0,
      theta: 0,
      dark: 1,
      diffuse: 1.2,
      scale: 1,
      mapSamples: 16000,
      mapBrightness: 6,
      baseColor: [1, 1, 1],
      markerColor: [1, 0.5, 1],
      glowColor: [1, 1, 1],
      offset: [0, 0],
      markers: [
        { location: [51.10846077549566, 17.03523183110746], size: 0.1 },
      ],
      onRender: (state) => {
        // Called on every animation frame.
        // `state` will be an empty object, return updated params.
        state.phi = phi;
        phi += 0.005;
        state.width = w;
        state.height = w;
      },
    });
  }
  main();
</script>
